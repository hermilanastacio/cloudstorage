{"version":3,"sources":["assets/loading.gif","pages/Dashboard.tsx","pages/Callback.tsx","pages/Login.tsx","index.tsx"],"names":["module","exports","Dashboard","useState","file","setFile","imgStyle","height","width","marginRight","useEffect","axios","get","headers","localStorage","getItem","then","res","data","files","console","log","catch","err","className","map","f","style","padding","borderBottom","display","alignItems","key","id","src","iconLink","alt","name","Callback","loadingImg","require","history","useHistory","code","URLSearchParams","window","location","search","post","process","access_token","push","justifyContent","Login","href","backgroundColor","color","ReactDOM","render","basename","REACT_PUBLIC_URL","exact","path","document","getElementById"],"mappings":"iKAAAA,EAAOC,QAAU,IAA0B,qC,2HCgD5BC,EA3Ca,WAAO,IAAD,EACRC,qBADQ,mBACzBC,EADyB,KACnBC,EADmB,KAG1BC,EAAW,CACfC,OAAQ,GACRC,MAAO,GACPC,YAAa,IAgBf,OAbAC,qBAAU,WACRC,IAAMC,IAAI,qDAAsD,CAC9DC,QAAS,CACP,cAAgB,UAAhB,OAA2BC,aAAaC,QAAQ,oBAGnDC,MAAK,SAAAC,GACJZ,EAAQY,EAAIC,KAAKC,OACjBC,QAAQC,IAAIJ,EAAIC,SAEjBI,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,QAC1B,IAGA,uBAAKC,UAAU,OACZpB,GAAQA,EAAKqB,KAAI,SAAAC,GAChB,OACE,uBACAC,MAAO,CACLC,QAAQ,YACRC,aAAc,iBACdC,QAAQ,OACRC,WAAW,UAEbC,IAAKN,EAAEO,IACL,uBAAKN,MAAOrB,EAAU4B,IAAKR,EAAES,SAAUC,IAAI,cAC3C,4BAAOV,EAAEW,YCRNC,EA5BY,WACzB,IAAMC,EAAaC,EAAQ,IAEvBC,EAAUC,cAEVC,EAAO,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQnC,IAAI,QAE3D,GAAI+B,EAEG,CAILhC,IAAMqC,KAAN,UAHc,sCAGd,iBAA8BL,EAA9B,sBAAgDM,2EAAhD,0BAAiGA,2BAAjG,yBAAqJA,4DAArJ,uBAFiB,uBAGhBjC,MAAK,SAAAC,GACJH,aAAY,aAAmBG,EAAIC,KAAKgC,aACxCT,EAAQU,KAAK,iBAEd7B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,WAV1BkB,EAAQU,KAAK,UAaf,OACE,uBAAKxB,MAAO,CAACpB,OAAO,OAAQuB,QAAQ,OAAQC,WAAW,SAAUqB,eAAe,WAC5E,uBAAKlB,IAAKK,EAAYH,IAAI,cCKnBiB,EA9BS,WAWtB,OACE,uBACE7B,UAAU,MACVG,MAAO,CACLyB,eAAe,SACfrB,WAAW,SACXD,QAAQ,SAGV,qBACEwB,KAbE,GAAN,OALc,+CAKd,kBAJY,4DAIZ,wBAHkB,UAGlB,0BAFoB,OAEpB,yBAA2GL,4DAA3G,sBAA2JA,4EAcvJtB,MAAO,CAAC4B,gBAAgB,OAAQC,MAAM,UAFxC,kBCdNC,IAASC,OACP,kBAAC,IAAD,CAAYC,SAAUV,qWAAYW,kBAChC,kBAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,KAChB,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,UAChB,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,cACV,kBAAC,EAAD,QAGJC,SAASC,eAAe,W","file":"static/js/main.b4b98660.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.9aed57e1.gif\";","import * as React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { IFile } from '../common/interfaces';\r\n\r\nconst Dashboard: React.FC = () => {\r\n  const [file, setFile] = useState<Array<IFile>>();\r\n\r\n  const imgStyle = {\r\n    height: 25,\r\n    width: 25,\r\n    marginRight: 10\r\n  }\r\n  \r\n  useEffect(() => {\r\n    axios.get('https://www.googleapis.com/drive/v3/files?fields=*', {\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem(\"GDRIVE_TOKEN\")}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      setFile(res.data.files)\r\n      console.log(res.data)\r\n    })\r\n    .catch(err => console.log(err))\r\n  },[]);\r\n\r\n  return(\r\n    <div className=\"App\">\r\n      {file && file.map(f => {\r\n        return(\r\n          <div \r\n          style={{\r\n            padding:\"15px 10px\",\r\n            borderBottom: \"1px solid gray\",\r\n            display:\"flex\",\r\n            alignItems:\"center\"\r\n          }}\r\n          key={f.id}>\r\n            <img style={imgStyle} src={f.iconLink} alt=\"thumbnail\"/>\r\n            <span>{f.name}</span>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import * as React from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from 'axios';\r\n\r\nconst Callback: React.FC = () => {\r\n  const loadingImg = require('../assets/loading.gif');\r\n\r\n  let history = useHistory();\r\n\r\n  let code = new URLSearchParams(window.location.search).get(\"code\");\r\n\r\n  if(!code) {\r\n    history.push('/login');\r\n  } else {\r\n    let baseUrl = 'https://oauth2.googleapis.com/token';\r\n    let grant_type = 'authorization_code';\r\n      \r\n    axios.post(`${baseUrl}?code=${code}&client_id=${process.env.REACT_APP_CLIENT_ID}&client_secret=${process.env.REACT_APP_CLIENT_SECRET}&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}&grant_type=${grant_type}`)\r\n    .then(res => {\r\n      localStorage[\"GDRIVE_TOKEN\"] = res.data.access_token;\r\n      history.push('/dashboard');\r\n    })\r\n    .catch(err => console.log(err))\r\n  }\r\n\r\n  return(\r\n    <div style={{height:\"100%\", display:\"flex\", alignItems:\"center\", justifyContent:\"center\"}}>\r\n        <img src={loadingImg} alt=\"loading\"/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Callback;\r\n","import * as React from 'react';\r\n\r\nconst Login: React.FC = () => {\r\n\r\n  const generateAuthUrl = () => {\r\n    let baseUrl = 'https://accounts.google.com/o/oauth2/v2/auth';\r\n    let scope = 'https%3A//www.googleapis.com/auth/drive.metadata.readonly';\r\n    let access_type = 'offline';\r\n    let response_type = 'code';\r\n  \r\n    return `${baseUrl}?scope=${scope}&access_type=${access_type}&response_type=${response_type}&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}&client_id=${process.env.REACT_APP_CLIENT_ID}`\r\n  }\r\n  \r\n  return(\r\n    <div \r\n      className=\"App\" \r\n      style={{\r\n        justifyContent:\"center\",\r\n        alignItems:\"center\",\r\n        display:\"flex\"\r\n      }}\r\n    >\r\n      <a\r\n        href={generateAuthUrl()}\r\n        style={{backgroundColor:\"blue\", color:\"white\"}}\r\n      >\r\n        Authenticate\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { HashRouter, Route } from \"react-router-dom\";\r\nimport Dashboard from './pages/Dashboard';\r\nimport Callback from './pages/Callback';\r\nimport Login from './pages/Login';\r\n\r\nReactDOM.render(\r\n  <HashRouter basename={process.env.REACT_PUBLIC_URL}>\r\n    <Route exact path=\"/\">\r\n      <Callback />\r\n    </Route>\r\n    <Route exact path=\"/login\">\r\n      <Login />\r\n    </Route>\r\n    <Route path=\"/dashboard\">\r\n      <Dashboard />\r\n    </Route>\r\n  </HashRouter>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}